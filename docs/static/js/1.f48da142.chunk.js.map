{"version":3,"sources":["encoreInfo/roseliaLyric.tsx","rhodonite/lazycomponent.tsx","webpack:///./src/rhodonite/lazycomponent.css?c96c","rhodonite/lazycomponent.css"],"names":["RoseliaLyrics","_super","props","_this","call","this","getLyric","__WEBPACK_IMPORTED_MODULE_0_tslib__","setState","loading","fetch","_b","sent","json","data","lyric","state","album","at","id","name","cnLyric","jpLyric","type","link","picUrl","prototype","shouldComponentUpdate","newState","Object","defineProperty","__WEBPACK_IMPORTED_MODULE_4__rhodonite_protocols_helpers__","renderContent","__WEBPACK_IMPORTED_MODULE_1_react__","__WEBPACK_IMPORTED_MODULE_2_semantic_ui_react__","Dimmable","as","blurring","dimmed","Group","Image","size","src","Content","verticalAlign","Header","Description","Extra","__WEBPACK_IMPORTED_MODULE_3_react_router_dom__","to","currentLink","content","icon","disabled","onClick","render","__WEBPACK_IMPORTED_MODULE_5__rhodonite_lazycomponent__","onVisible","LazyComonent","setVisible","visible","getPlaceHolder","placeHolder","Function","Paragraph","listener","once","onTopVisible","onBottomVisible","children","__webpack_require__","module","i","options","hmr","transform","locals","exports","push","version","sources","names","mappings","file","sourcesContent","sourceRoot"],"mappings":"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","file":"static/js/1.f48da142.chunk.js","sourcesContent":["import * as React from 'react'\r\nimport {TrackType} from '../rhodonite/protocols/encore'\r\nimport {Item, Button, Segment, Dimmer, Label} from 'semantic-ui-react'\r\nimport {Link} from 'react-router-dom'\r\nimport {getPositionByNum} from '../rhodonite/protocols/helpers'\r\nimport {LazyComonent} from '../rhodonite/lazycomponent'\r\n\r\ninterface RandomLyric {\r\n    album: string\r\n    at: string\r\n    id: number\r\n    cnLyric: string\r\n    jpLyric: string\r\n    lyric: string\r\n    name: string\r\n    type: TrackType,\r\n    link: string\r\n    picUrl: string\r\n}\r\n\r\ninterface RoseliaLyricsState {\r\n    lyric: RandomLyric\r\n    loading: boolean\r\n}\r\n\r\nexport class RoseliaLyrics extends React.Component<{}, RoseliaLyricsState> {\r\n    constructor (props: object) {\r\n        super(props)\r\n        this.state = {\r\n            lyric: {\r\n                album: '', \r\n                at: '', \r\n                id: 1, \r\n                lyric: '', \r\n                name: '', \r\n                cnLyric: '',\r\n                jpLyric: '',\r\n                type: 'album',\r\n                link: '',\r\n                picUrl: ''\r\n            },\r\n            loading: false\r\n        }\r\n    }\r\n    public shouldComponentUpdate(newState: RoseliaLyricsState) {\r\n        return newState.loading !== this.state.loading || newState.lyric.name !== this.state.lyric.name || newState.lyric.at !== this.state.lyric.at\r\n    }\r\n    private getLyric = async () => {\r\n        this.setState({\r\n            loading: true\r\n        })\r\n        try{\r\n            const j = await fetch('https://roselia.moe/blog/api/roselia/lyric/random');\r\n            const data = await j.json();\r\n            this.setState({\r\n                loading: false,\r\n                lyric: data\r\n            });\r\n        } catch {\r\n            this.setState({\r\n                loading: false\r\n            })\r\n        }\r\n    }\r\n\r\n    private get currentLink () {\r\n        const lyric = this.state.lyric\r\n        return `${lyric.type}/${lyric.id}${getPositionByNum(lyric.id)}`\r\n    }\r\n\r\n    private renderContent() {\r\n        const lyric = this.state.lyric\r\n        return (\r\n            <Dimmer.Dimmable as={Segment} blurring dimmed={this.state.loading}>\r\n                <Item.Group>\r\n                    <Item>\r\n                        <Item.Image size=\"small\" src={lyric.picUrl} />\r\n                        <Item.Content verticalAlign=\"middle\">\r\n                            <Item.Header>\r\n                                <p><span>{lyric.jpLyric}</span></p>\r\n                                <p><span>{lyric.cnLyric}</span></p>\r\n                            </Item.Header>\r\n                            <Item.Description>{lyric.name}</Item.Description>\r\n                            <Item.Extra>\r\n                                <Label as={Link} to={this.currentLink} content={lyric.album} />\r\n                                <Label icon='time' content={lyric.at}/>\r\n                            </Item.Extra>\r\n                            <Item.Extra>\r\n                                <Button disabled={this.state.loading} size=\"small\" icon=\"refresh\" onClick={this.getLyric}></Button>\r\n                            </Item.Extra>\r\n                        </Item.Content>\r\n                    </Item>\r\n                </Item.Group>\r\n            </Dimmer.Dimmable>\r\n        )\r\n    }\r\n\r\n    public render() {\r\n        return (\r\n            <LazyComonent onVisible={this.getLyric}>{this.renderContent()}</LazyComonent>\r\n        )\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/encoreInfo/roseliaLyric.tsx","import * as React from 'react'\r\nimport {Placeholder, Visibility} from 'semantic-ui-react'\r\nimport './lazycomponent.css'\r\n\r\n\r\ninterface LazyComonentState {\r\n    visible: boolean\r\n}\r\n\r\n\r\ninterface LazyComonentProps {\r\n    placeHolder?: (() => JSX.Element | React.ReactNode) | JSX.Element | React.ReactNode\r\n    onVisible?: () => void\r\n    [ext: string]: any\r\n}\r\n\r\n\r\nexport class LazyComonent extends React.Component<LazyComonentProps, LazyComonentState> {\r\n    public constructor(props: LazyComonentProps) {\r\n        super(props)\r\n        this.state = {\r\n            visible: false\r\n        }\r\n    }\r\n    private setVisible = () => {\r\n        if(this.props.onVisible) this.props.onVisible()\r\n        this.setState({\r\n            visible: true\r\n        })\r\n    }\r\n    public shouldComponentUpdate () {\r\n        return this.state.visible\r\n    }\r\n    private getPlaceHolder () {\r\n        const {placeHolder} = this.props\r\n        if (placeHolder) {\r\n            if(placeHolder instanceof Function) {\r\n                return placeHolder()\r\n            }\r\n            return placeHolder\r\n        }\r\n        return (\r\n            <Placeholder>\r\n                <Placeholder.Paragraph></Placeholder.Paragraph>\r\n            </Placeholder>\r\n        )\r\n    }\r\n    private listener () {\r\n        return (\r\n            <Visibility once onTopVisible={this.setVisible} onBottomVisible={this.setVisible}></Visibility>\r\n        )\r\n    }\r\n    public render() {\r\n        return this.state.visible ? this.props.children : (\r\n            <div>\r\n                {this.listener()}\r\n                {this.getPlaceHolder()}\r\n            </div>\r\n        )\r\n    }\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/rhodonite/lazycomponent.tsx","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../node_modules/css-loader/index.js??ref--1-oneOf-3-2!../../node_modules/postcss-loader/lib/index.js??postcss!./lazycomponent.css\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// Prepare cssTransformation\nvar transform;\n\nvar options = {\"hmr\":false}\noptions.transform = transform\n// add the styles to the DOM\nvar update = require(\"!../../node_modules/style-loader/lib/addStyles.js\")(content, options);\nif(content.locals) module.exports = content.locals;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/rhodonite/lazycomponent.css\n// module id = 734\n// module chunks = 0 1","exports = module.exports = require(\"../../node_modules/css-loader/lib/css-base.js\")(true);\n// imports\n\n\n// module\nexports.push([module.id, \"@-webkit-keyframes rhodonite-fade-in-animate{0%{opacity:0}to{opacity:1}}@keyframes rhodonite-fade-in-animate{0%{opacity:0}to{opacity:1}}.rhodonite-fade-in{-webkit-animation:rhodonite-fade-in-animate .37s ease-in-out;animation:rhodonite-fade-in-animate .37s ease-in-out}.rhodonite-fade-out{-webkit-animation:rhodonite-fade-in-animate .37s ease-in-out reverse;animation:rhodonite-fade-in-animate .37s ease-in-out reverse}\", \"\", {\"version\":3,\"sources\":[\"D:/DEV/HTML/rslacdn/roselia-encore-react/src/rhodonite/lazycomponent.css\"],\"names\":[],\"mappings\":\"AAAA,6CACI,GAAM,SAAW,CAAC,AAClB,GAAI,SAAW,CAAC,CACnB,AAED,qCACI,GAAM,SAAW,CAAC,AAClB,GAAI,SAAW,CAAC,CACnB,AAED,mBACI,6DAA8D,AACtD,oDAAsD,CACjE,AACD,oBACI,qEAAsE,AAC9D,4DAA8D,CACzE\",\"file\":\"lazycomponent.css\",\"sourcesContent\":[\"@-webkit-keyframes rhodonite-fade-in-animate {\\r\\n    from {opacity: 0;}\\r\\n    to {opacity: 1;}\\r\\n}\\r\\n\\r\\n@keyframes rhodonite-fade-in-animate {\\r\\n    from {opacity: 0;}\\r\\n    to {opacity: 1;}\\r\\n}\\r\\n\\r\\n.rhodonite-fade-in {\\r\\n    -webkit-animation: rhodonite-fade-in-animate .37s ease-in-out;\\r\\n            animation: rhodonite-fade-in-animate .37s ease-in-out;\\r\\n}\\r\\n.rhodonite-fade-out {\\r\\n    -webkit-animation: rhodonite-fade-in-animate .37s ease-in-out reverse;\\r\\n            animation: rhodonite-fade-in-animate .37s ease-in-out reverse;\\r\\n}\"],\"sourceRoot\":\"\"}]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/css-loader?{\"importLoaders\":1,\"minimize\":true,\"sourceMap\":true}!./node_modules/postcss-loader/lib?{\"ident\":\"postcss\",\"plugins\":[null,null]}!./src/rhodonite/lazycomponent.css\n// module id = 735\n// module chunks = 0 1"],"sourceRoot":""}