{"version":3,"sources":["encoreInfo/roseliaLyric.tsx"],"names":["RoseliaLyrics","_super","props","_this","call","this","getLyric","Object","__WEBPACK_IMPORTED_MODULE_0_tslib__","setState","loading","fetch","_b","sent","json","data","lyric","state","album","at","id","name","cnLyric","jpLyric","type","link","picUrl","prototype","shouldComponentUpdate","newState","defineProperty","__WEBPACK_IMPORTED_MODULE_4__rhodonite_protocols_helpers__","renderContent","__WEBPACK_IMPORTED_MODULE_1_react__","__WEBPACK_IMPORTED_MODULE_2_semantic_ui_react__","Dimmable","as","blurring","dimmed","Group","Image","size","src","Content","verticalAlign","Header","Description","Extra","__WEBPACK_IMPORTED_MODULE_3_react_router_dom__","to","currentLink","content","icon","disabled","onClick","render","__WEBPACK_IMPORTED_MODULE_5__rhodonite_lazycomponent__","onVisible"],"mappings":"6MAyBAA,EAAA,SAAAC,GACI,SAAAD,EAAaE,GAAb,IAAAC,EACIF,EAAAG,KAAAC,KAAMH,IAAMG,YAoBRF,EAAAG,SAAW,kBAAAC,OAAAC,EAAA,EAAAD,CAAAJ,OAAA,qFACfE,KAAKI,UACDC,SAAS,qBAGC,gCAAMC,MAAM,6DACT,SADHC,EAAAC,OACWC,sBAAfC,EAAOH,EAAAC,OACbR,KAAKI,UACDC,SAAS,EACTM,MAAOD,iCAGXV,KAAKI,UACDC,SAAS,iCAhCjBP,EAAKc,OACDD,OACIE,MAAO,GACPC,GAAI,GACJC,GAAI,EACJJ,MAAO,GACPK,KAAM,GACNC,QAAS,GACTC,QAAS,GACTC,KAAM,QACNC,KAAM,GACNC,OAAQ,IAEZhB,SAAS,KA6DrB,OA7EmCH,OAAAC,EAAA,EAAAD,CAAAP,EAAAC,GAmBxBD,EAAA2B,UAAAC,sBAAP,SAA6BC,GACzB,OAAOA,EAASnB,UAAYL,KAAKY,MAAMP,SAAWmB,EAASb,MAAMK,OAAShB,KAAKY,MAAMD,MAAMK,MAAQQ,EAASb,MAAMG,KAAOd,KAAKY,MAAMD,MAAMG,IAoB9IZ,OAAAuB,eAAY9B,EAAA2B,UAAA,mBAAZ,WACI,IAAMX,EAAQX,KAAKY,MAAMD,MACzB,OAAUA,EAAMQ,KAAI,IAAIR,EAAMI,GAAKb,OAAAwB,EAAA,EAAAxB,CAAiBS,EAAMI,qCAGtDpB,EAAA2B,UAAAK,cAAR,WACI,IAAMhB,EAAQX,KAAKY,MAAMD,MACzB,OACIiB,EAAA,cAACC,EAAA,EAAOC,UAASC,GAAIF,EAAA,EAASG,UAAQ,EAACC,OAAQjC,KAAKY,MAAMP,SACtDuB,EAAA,cAACC,EAAA,EAAKK,MAAK,KACPN,EAAA,cAACC,EAAA,EAAI,KACDD,EAAA,cAACC,EAAA,EAAKM,OAAMC,KAAK,QAAQC,IAAK1B,EAAMU,SACpCO,EAAA,cAACC,EAAA,EAAKS,SAAQC,cAAc,UACxBX,EAAA,cAACC,EAAA,EAAKW,OAAM,KACRZ,EAAA,uBAAGA,EAAA,0BAAOjB,EAAMO,UAChBU,EAAA,uBAAGA,EAAA,0BAAOjB,EAAMM,WAEpBW,EAAA,cAACC,EAAA,EAAKY,YAAW,KAAE9B,EAAMK,MACzBY,EAAA,cAACC,EAAA,EAAKa,MAAK,KACPd,EAAA,cAACC,EAAA,GAAME,GAAIY,EAAA,EAAMC,GAAI5C,KAAK6C,YAAaC,QAASnC,EAAME,QACtDe,EAAA,cAACC,EAAA,GAAMkB,KAAK,OAAOD,QAASnC,EAAMG,MAEtCc,EAAA,cAACC,EAAA,EAAKa,MAAK,KACPd,EAAA,cAACC,EAAA,GAAOmB,SAAUhD,KAAKY,MAAMP,QAAS+B,KAAK,QAAQW,KAAK,UAAUE,QAASjD,KAAKC,iBASrGN,EAAA2B,UAAA4B,OAAP,WACI,OACItB,EAAA,cAACuB,EAAA,GAAaC,UAAWpD,KAAKC,UAAWD,KAAK2B,kBAG1DhC,EA7EA,CAAmCiC,EAAA","file":"static/js/1.aefce22a.chunk.js","sourcesContent":["import * as React from 'react'\nimport {TrackType} from '../rhodonite/protocols/encore'\nimport {Item, Button, Segment, Dimmer, Label} from 'semantic-ui-react'\nimport {Link} from 'react-router-dom'\nimport {getPositionByNum} from '../rhodonite/protocols/helpers'\nimport {LazyComonent} from '../rhodonite/lazycomponent'\n\ninterface RandomLyric {\n    album: string\n    at: string\n    id: number\n    cnLyric: string\n    jpLyric: string\n    lyric: string\n    name: string\n    type: TrackType,\n    link: string\n    picUrl: string\n}\n\ninterface RoseliaLyricsState {\n    lyric: RandomLyric\n    loading: boolean\n}\n\nexport class RoseliaLyrics extends React.Component<{}, RoseliaLyricsState> {\n    constructor (props: object) {\n        super(props)\n        this.state = {\n            lyric: {\n                album: '', \n                at: '', \n                id: 1, \n                lyric: '', \n                name: '', \n                cnLyric: '',\n                jpLyric: '',\n                type: 'album',\n                link: '',\n                picUrl: ''\n            },\n            loading: false\n        }\n    }\n    public shouldComponentUpdate(newState: RoseliaLyricsState) {\n        return newState.loading !== this.state.loading || newState.lyric.name !== this.state.lyric.name || newState.lyric.at !== this.state.lyric.at\n    }\n    private getLyric = async () => {\n        this.setState({\n            loading: true\n        })\n        try{\n            const j = await fetch('https://roselia.moe/blog/api/roselia/lyric/random');\n            const data = await j.json();\n            this.setState({\n                loading: false,\n                lyric: data\n            });\n        } catch {\n            this.setState({\n                loading: false\n            })\n        }\n    }\n\n    private get currentLink () {\n        const lyric = this.state.lyric\n        return `${lyric.type}/${lyric.id}${getPositionByNum(lyric.id)}`\n    }\n\n    private renderContent() {\n        const lyric = this.state.lyric\n        return (\n            <Dimmer.Dimmable as={Segment} blurring dimmed={this.state.loading}>\n                <Item.Group>\n                    <Item>\n                        <Item.Image size=\"small\" src={lyric.picUrl} />\n                        <Item.Content verticalAlign=\"middle\">\n                            <Item.Header>\n                                <p><span>{lyric.jpLyric}</span></p>\n                                <p><span>{lyric.cnLyric}</span></p>\n                            </Item.Header>\n                            <Item.Description>{lyric.name}</Item.Description>\n                            <Item.Extra>\n                                <Label as={Link} to={this.currentLink} content={lyric.album} />\n                                <Label icon='time' content={lyric.at}/>\n                            </Item.Extra>\n                            <Item.Extra>\n                                <Button disabled={this.state.loading} size=\"small\" icon=\"refresh\" onClick={this.getLyric}></Button>\n                            </Item.Extra>\n                        </Item.Content>\n                    </Item>\n                </Item.Group>\n            </Dimmer.Dimmable>\n        )\n    }\n\n    public render() {\n        return (\n            <LazyComonent onVisible={this.getLyric}>{this.renderContent()}</LazyComonent>\n        )\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/encoreInfo/roseliaLyric.tsx"],"sourceRoot":""}